(this.webpackJsonptweeter=this.webpackJsonptweeter||[]).push([[0],{43:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(28),r=a.n(n),i=a(5),j=a(17),o=a(6),l=a(10),u=a.n(l),b=a(15),d=a(19);a(35),a(44),a(45);d.a.initializeApp({apiKey:"AIzaSyAFZiQqotWmyE8_M-OI3zfc-19kU91_1GY",authDomain:"tweeter-5c5ff.firebaseapp.com",projectId:"tweeter-5c5ff",storageBucket:"tweeter-5c5ff.appspot.com",messagingSenderId:"833232084476",appId:"1:833232084476:web:0d93659facb677ee536679"});d.a;var O=d.a.auth(),m=d.a.auth,f=d.a.firestore(),h=d.a.storage(),x=a(1),p=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),r=Object(i.a)(n,2),j=r[0],o=r[1],l=Object(c.useState)(!0),d=Object(i.a)(l,2),f=d[0],h=d[1],p=Object(c.useState)(""),g=Object(i.a)(p,2),v=g[0],w=g[1],N=function(e){var t=e.target,a=t.name,c=t.value;"email"===a?s(c):"password"===a&&o(c)},y=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(a,j);case 5:e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(a,j);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),w(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(a=t.target.name)?c=new m.GoogleAuthProvider:"github"===a&&(c=new m.GithubAuthProvider),e.next=4,O.signInWithPopup(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"auth-form-container",children:Object(x.jsxs)("div",{className:"auth-form",children:[Object(x.jsx)("header",{children:Object(x.jsx)("i",{className:"fab fa-twitter"})}),Object(x.jsxs)("form",{onSubmit:y,children:[Object(x.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,onChange:N,value:a}),Object(x.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,onChange:N,value:j}),Object(x.jsx)("input",{className:"button",type:"submit",value:f?"Create Account":"Sign in"})]}),Object(x.jsx)("span",{className:"button",onClick:function(){h((function(e){return!e}))},children:f?"Sign in":"Create Account"}),v?Object(x.jsx)("span",{children:v}):null,Object(x.jsxs)("div",{className:"auth-form-buttons",children:[Object(x.jsxs)("button",{onClick:S,name:"google",children:["Continue with",Object(x.jsx)("i",{className:"fab fa-google"})]}),Object(x.jsxs)("button",{onClick:S,name:"github",children:["Continue with",Object(x.jsx)("i",{className:"fab fa-github"})]})]})]})})},g=a(22),v=function(e){var t=e.tweetObj,a=e.userObj,s=e.profile,n=e.profilePhoto,r=Object(c.useState)(!1),j=Object(i.a)(r,2),o=j[0],l=j[1],d=Object(c.useState)(t.text),O=Object(i.a)(d,2),m=O[0],p=O[1],g=function(e){if(a.uid==e)return!0},v=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this Tweet?")){e.next=7;break}return e.next=4,f.collection("tweets").doc(t.id).delete();case 4:if(!t.imageURL){e.next=7;break}return e.next=7,h.refFromURL(t.imageURL).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){return l((function(e){return!e}))},N=function(e){e.preventDefault(),f.collection("tweets").doc(t.id).update({text:m}),l(!1)},y=function(e){var t=e.target.value;p(t)};return Object(x.jsxs)(x.Fragment,{children:[g(t.userId)?Object(x.jsx)("img",{className:"current-user",src:n}):Object(x.jsx)("div",{className:"other-user",children:t.userName.charAt(0)}),s?Object(x.jsxs)("div",{className:"profile-tweet",children:[g(t.userId)&&!o?Object(x.jsxs)("div",{className:"edit-buttons",children:[Object(x.jsx)("i",{onClick:v,className:"fas fa-trash-alt"}),Object(x.jsx)("i",{onClick:w,className:"fas fa-edit"})]}):null,o?Object(x.jsx)("div",{className:"update-form",children:Object(x.jsxs)("form",{onSubmit:function(e){return N(e)},children:[Object(x.jsx)("input",{onChange:y,type:"text",value:m,placeholder:"Edit Tweet",required:!0}),Object(x.jsx)("button",{className:"update-btn",children:Object(x.jsx)("i",{className:"fab fa-twitter"})}),Object(x.jsx)("button",{className:"cancel-btn",onClick:w,children:"Cancel"})]})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:t.imageURL?"tweet-contents":"tweet-content",children:[Object(x.jsx)("h2",{className:t.imageURL&&"tweet-with-photo",children:t.text}),t.imageURL&&Object(x.jsx)("img",{className:"tweet-image",src:t.imageURL})]}),Object(x.jsxs)("span",{className:"tweet-user",children:["by ",g(t.userId)?"you":t.userName]})]})]}):Object(x.jsxs)("div",{className:g(t.userId)?"my-tweet":"tweet",children:[g(t.userId)&&!o?Object(x.jsxs)("div",{className:"edit-buttons",children:[Object(x.jsx)("i",{onClick:v,className:"fas fa-trash-alt"}),Object(x.jsx)("i",{onClick:w,className:"fas fa-edit"})]}):null,o?Object(x.jsx)("div",{className:"update-form",children:Object(x.jsxs)("form",{onSubmit:function(e){return N(e)},children:[Object(x.jsx)("input",{onChange:y,type:"text",value:m,placeholder:"Edit Tweet",required:!0}),Object(x.jsx)("button",{className:"update-btn",children:Object(x.jsx)("i",{className:"fab fa-twitter"})}),Object(x.jsx)("button",{className:"cancel-btn",onClick:w,children:"Cancel"})]})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:t.imageURL?"tweet-contents":"tweet-content",children:[Object(x.jsx)("h2",{className:t.imageURL&&"tweet-with-photo",children:t.text}),t.imageURL&&Object(x.jsx)("img",{className:"tweet-image",src:t.imageURL})]}),Object(x.jsxs)("span",{className:"tweet-user",children:["by ",g(t.userId)?"you":t.userName]})]})]})]})},w=a(47),N=function(){return Object(x.jsx)("nav",{children:Object(x.jsxs)("div",{className:"nav-buttons",children:[Object(x.jsx)("div",{children:Object(x.jsx)(j.b,{exact:!0,className:"nav-btn",to:"/",children:Object(x.jsx)("i",{className:"nav-icon fas fa-user-alt"})})}),Object(x.jsx)("div",{children:Object(x.jsx)(j.b,{exact:!0,className:"nav-btn",to:"/home",children:Object(x.jsx)("i",{className:"nav-icon fas fa-home"})})}),Object(x.jsx)("div",{children:Object(x.jsx)(j.b,{className:"nav-btn",to:"/sign-out",children:Object(x.jsx)("i",{className:"nav-icon fas fa-power-off"})})})]})})},y=function(e){var t=e.userObj,a=Object(c.useState)(""),s=Object(i.a)(a,2),n=s[0],r=s[1],j=Object(c.useState)(""),o=Object(i.a)(j,2),l=o[0],d=o[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),p=m[0],g=m[1],v=function(){var e=Object(b.a)(u.a.mark((function e(a){var c,s,i,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!p){e.next=13;break}return s=h.ref().child("".concat(t.uid,"/").concat(Object(w.a)())),e.next=5,s.putString(l,"data_url");case 5:return i=e.sent,e.next=8,i.ref.getDownloadURL();case 8:j=e.sent,c={text:n,createdAt:Date.now(),userId:t.uid,userName:t.displayName||t.email,imageURL:j},d(""),e.next=14;break;case 13:c={text:n,createdAt:Date.now(),userId:t.uid,userName:t.displayName||t.email};case 14:return e.next=16,f.collection("tweets").add(c);case 16:r("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"nav-bar",children:[Object(x.jsxs)("form",{className:"tweet-form",onSubmit:v,children:[Object(x.jsx)("input",{value:n,onChange:function(e){var t=e.target.value;r(t)},type:"text",placeholder:"What's on your mind?",maxLength:120,required:!0}),l&&Object(x.jsxs)("div",{className:"image-tweet-container",children:[Object(x.jsx)("img",{className:"tweet-form-image",src:l}),Object(x.jsx)("button",{onClick:function(){d(""),g(!1)},children:Object(x.jsx)("i",{className:"fas fa-times"})})]}),Object(x.jsxs)("label",{className:"upload-photo",children:[Object(x.jsx)("input",{className:"add-image-tweet",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(e){var t=e.target.result;d(t)},g(!0)}}),Object(x.jsx)("i",{className:"fas fa-camera"})]}),Object(x.jsx)("button",{children:Object(x.jsx)("i",{className:"fab fa-twitter"})})]}),Object(x.jsx)(N,{})]})},S=function(e){var t=e.userObj,a=e.profilePhoto,s=O.currentUser,n=Object(c.useState)([]),r=Object(i.a)(n,2),j=r[0],l=r[1],u=Object(o.f)();return 1==performance.navigation.type&&u.push("/"),Object(c.useEffect)((function(){var e=f.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));l(t)}));return function(){e(),l([])}}),[]),Object(x.jsxs)("div",{className:"tweeter-home",children:[Object(x.jsx)("i",{className:"twitter-icon-large fab fa-twitter",children:"#Tweeter"}),Object(x.jsx)(y,{userObj:s}),Object(x.jsx)("div",{className:"tweets-container",children:j.map((function(e){return Object(x.jsx)(v,{tweetObj:e,userObj:t,profilePhoto:a},e.id)}))}),Object(x.jsx)("div",{className:"splash-screen",children:Object(x.jsx)("i",{className:"fab fa-twitter",children:"Clone"})})]})},C=function(e){var t=e.userObj,a=e.getImage,s=O.currentUser,n=Object(c.useState)([]),r=Object(i.a)(n,2),j=r[0],o=r[1],l=Object(c.useState)(""),d=Object(i.a)(l,2),m=d[0],h=d[1],p=Object(c.useState)(""),w=Object(i.a)(p,2),N=w[0],S=w[1],C=Object(c.useState)(!1),k=Object(i.a)(C,2),I=k[0],U=k[1];Object(c.useEffect)((function(){f.collection("tweets").orderBy("createdAt","desc").where("userId","==",s.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));o(t);var c=t.length-1;t.length>0&&t[c].userImage&&(S(t[c].userImage),U(!0),a(t[c].userImage))})),h(s.displayName||s.email)}),[]);var A=function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(e){var t=e.target.result;S(t),U(!0)}},R=function(e){e.preventDefault();for(var t=0;t<j.length;t++)f.collection("tweets").doc(j[t].id).update({userImage:N});U(!0)},L=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.displayName&&s.email===m){e.next=5;break}return e.next=4,s.updateProfile({displayName:m});case 4:h(s.displayName);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"tweeter-profile",children:[Object(x.jsxs)("div",{className:"tweets-container",children:[Object(x.jsxs)("h2",{children:["You have ",j.length," ",Object(x.jsx)("i",{className:"fab fa-twitter"}),j.length>1&&"'s"]}),j.map((function(e){return Object(x.jsx)(v,{tweetObj:e,userObj:t,profile:!0,profilePhoto:N},e.id)}))]}),Object(x.jsxs)("div",{className:"profile-container",children:[Object(x.jsxs)("h1",{children:["How are you doing today, ",m,"?"]}),I?Object(x.jsx)("div",{className:"image-container",children:Object(x.jsxs)("form",{onSubmit:R,children:[Object(x.jsxs)("label",{className:"profile-picture-container",children:[Object(x.jsx)("input",{id:"profile-picture-input",type:"file",accept:"image/*",onChange:A}),Object(x.jsx)("img",{src:N})]}),Object(x.jsx)("button",{children:"Update profile picture"})]})}):Object(x.jsx)("div",{className:"image-container",children:Object(x.jsxs)("form",{onSubmit:R,children:[Object(x.jsxs)("label",{className:"profile-picture-container",children:[Object(x.jsx)("input",{id:"profile-picture-input",type:"file",accept:"image/*",onChange:A}),Object(x.jsx)("h2",{children:"Add your profile picture"})]}),Object(x.jsx)("button",{children:"Update profile picture"})]})}),Object(x.jsxs)("form",{onSubmit:L,children:[Object(x.jsx)("input",{onChange:function(e){var t=e.target.value;h(t)},type:"text",placeholder:"Display Name",value:m}),Object(x.jsx)("button",{children:Object(x.jsx)("i",{className:"fas fa-pencil-alt"})})]})]}),Object(x.jsx)(y,{userObj:s}),Object(x.jsx)("div",{className:"splash-screen",children:Object(x.jsx)("i",{className:"fab fa-twitter",children:"Clone"})})]})},k=function(){var e=Object(o.f)();return Object(x.jsx)("div",{className:"sign-out-container",children:Object(x.jsxs)("div",{className:"sign-out",children:[Object(x.jsx)("h1",{children:"Heading out so soon?"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{onClick:function(){O.signOut(),e.push("/")},children:["Yes ",Object(x.jsx)("i",{className:"far fa-frown"})]}),Object(x.jsxs)("button",{onClick:function(){e.push("/")},children:["No, bring me back home",Object(x.jsx)("i",{className:"fab fa-twitter"})]})]})]})})},I=function(e){var t=e.isLoggedIn,a=e.userObj,c=e.getImage,s=e.profilePhoto;return Object(x.jsx)(j.a,{children:Object(x.jsx)(o.c,{children:t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.a,{exact:!0,path:"/",children:Object(x.jsx)(C,{userObj:a,getImage:c})}),Object(x.jsxs)(o.a,{exact:!0,path:"/home",children:[Object(x.jsx)(S,{userObj:a,profilePhoto:s,getImage:c})," "]}),Object(x.jsx)(o.a,{exact:!0,path:"/sign-out",children:Object(x.jsx)(k,{})})]}):Object(x.jsx)(o.a,{exact:!0,path:"/",children:Object(x.jsx)(p,{})})})})};var U=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),r=Object(i.a)(n,2),j=r[0],o=r[1],l=Object(c.useState)(null),u=Object(i.a)(l,2),b=u[0],d=u[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),h=f[0],p=f[1];return Object(c.useEffect)((function(){var e=O.onAuthStateChanged((function(e){e?(o(!0),d(e)):o(!1),s(!0)}));return function(){e()}}),[]),Object(x.jsxs)(x.Fragment,{children:[a?Object(x.jsx)(I,{isLoggedIn:j,userObj:b,getImage:function(e){p(e)},profilePhoto:h}):"Initializing...",Object(x.jsxs)("div",{className:"overlay",children:[Object(x.jsx)("i",{className:"fab fa-twitter"}),Object(x.jsx)("h1",{children:"YOUR SCREEN IS TOO small"})]})]})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.605a67bd.chunk.js.map